<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Integrasi Sysdig Monitor di OpenShift - Anwar's Blog</title><meta name=Description content="Memasang Sysdig Agent pada OpenShift untuk Monitoring Cloud Native Environment Cluster OpenShift."><meta property="og:title" content="Integrasi Sysdig Monitor di OpenShift"><meta property="og:description" content="Memasang Sysdig Agent pada OpenShift untuk Monitoring Cloud Native Environment Cluster OpenShift."><meta property="og:type" content="article"><meta property="og:url" content="https://init.web.id/integrasi-sysdig-monitor-di-openshift/"><meta property="og:image" content="https://init.web.id/integrasi-sysdig-monitor-di-openshift/cover.png"><meta property="article:published_time" content="2021-01-12T23:22:41+07:00"><meta property="article:modified_time" content="2021-01-13T04:10:41+07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://init.web.id/integrasi-sysdig-monitor-di-openshift/cover.png"><meta name=twitter:title content="Integrasi Sysdig Monitor di OpenShift"><meta name=twitter:description content="Memasang Sysdig Agent pada OpenShift untuk Monitoring Cloud Native Environment Cluster OpenShift."><meta name=application-name content="Anwar's Blog"><meta name=apple-mobile-web-app-title content="Anwar's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://init.web.id/integrasi-sysdig-monitor-di-openshift/><link rel=prev href=https://init.web.id/quick-install-okd-4-di-aws/><link rel=next href=https://init.web.id/kubernetes-cluster-provisioning-dengan-terraform-dan-ansible-di-aws/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Integrasi Sysdig Monitor di OpenShift","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/init.web.id\/integrasi-sysdig-monitor-di-openshift\/"},"image":[{"@type":"ImageObject","url":"https:\/\/init.web.id\/integrasi-sysdig-monitor-di-openshift\/cover.png","width":1000,"height":420}],"genre":"posts","keywords":"Sysdig, OpenShift, Monitoring, SaaS","wordcount":1298,"url":"https:\/\/init.web.id\/integrasi-sysdig-monitor-di-openshift\/","datePublished":"2021-01-12T23:22:41+07:00","dateModified":"2021-01-13T04:10:41+07:00","license":"\u003ca href=\"https://creativecommons.org/licenses/by-nc/4.0/\" target=\"_blank\" rel=\"noopener\"\u003eCC BY-NC 4.0\u003c/a\u003e","publisher":{"@type":"Organization","name":"anwareset","logo":"https:\/\/github.com\/anwareset.png"},"author":{"@type":"Person","name":"anwareset"},"description":"Memasang Sysdig Agent pada OpenShift untuk Monitoring Cloud Native Environment Cluster OpenShift."}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('dark'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'dark'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Anwar's Blog"><span class=header-title-pre><i class="fas fa-hashtag"></i>&nbsp</span><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about/>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Anwar's Blog"><span class=header-title-pre><i class="fas fa-hashtag"></i>&nbsp</span><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/categories/>Categories</a><a class=menu-item href=/about/>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Integrasi Sysdig Monitor di OpenShift</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://init.web.id/about title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>anwareset</a></span>&nbsp;<span class=post-category>included in <a href=/categories/cloud/><i class="far fa-folder fa-fw"></i>Cloud</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-01-12>2021-01-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1298 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;7 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/integrasi-sysdig-monitor-di-openshift/cover.png data-srcset="/integrasi-sysdig-monitor-di-openshift/cover.png, /integrasi-sysdig-monitor-di-openshift/cover.png 1.5x, /integrasi-sysdig-monitor-di-openshift/cover.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/cover.png title="Memasang Sysdig Agent pada OpenShift untuk Monitoring Cloud Native Environment Cluster OpenShift."></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#sysdig>Sysdig</a><ul><li><a href=#metrics>Metrics</a></li><li><a href=#sysdig-agent>Sysdig Agent</a></li></ul></li><li><a href=#prerequisites>Prerequisites</a><ul><li><a href=#membuat-akun>Membuat Akun</a></li><li><a href=#mendapatkan-access-key>Mendapatkan Access Key</a></li><li><a href=#klaster-openshift>Klaster OpenShift</a></li></ul></li><li><a href=#konfigurasi-openshift>Konfigurasi OpenShift</a><ul><li><a href=#membuat-project-baru>Membuat Project Baru</a></li><li><a href=#melabeli-node>Melabeli Node</a></li><li><a href=#pindah-project>Pindah Project</a></li><li><a href=#membuat-service-account>Membuat Service Account</a></li><li><a href=#previlege-security-context-constraints>Previlege Security Context Constraints</a></li><li><a href=#cluster-role>Cluster Role</a></li></ul></li><li><a href=#memasang-sysdig-agent>Memasang Sysdig Agent</a><ul><li><a href=#pasang-paket-helm>Pasang Paket Helm</a></li><li><a href=#menambah-repositori>Menambah Repositori</a></li><li><a href=#pasang-sysdig-agent-dengan-helm>Pasang Sysdig Agent dengan Helm</a></li></ul></li><li><a href=#pengujian>Pengujian</a><ul><li><a href=#pods>Pods</a></li><li><a href=#front-end>Front End</a></li></ul></li><li><a href=#kesimpulan>Kesimpulan</a></li><li><a href=#referensi>Referensi</a></li></ul></nav></div></div><div class=content id=content><p>Sysdig mampu menyediakan <em>Cloud Monitoring</em> yang memungkinkan kita untuk memaksimalkan performa dan ketersediaan dari infrastruktur, layanan, dan aplikasi berbasis <em>cloud</em>. Pada artikel ini saya akan mencoba mengintegrasikan layanan Sysdig Monitor dengan klaster OpenShift Cloud Platform.</p><h2 id=sysdig>Sysdig</h2><p><strong>Sysdig</strong> adalah sebuah <em>Software as a Service (SaaS)</em> yang bertugas untuk mengambil <em>timeseries data</em> atau biasa disebut <em>metric</em> dari klaster atau <em>cloud native environment</em> kemudian mengolah lalu menampilkannya secara <em>real time</em> untuk berbagai kebutuhan, misalnya akselerasi <em>troubleshooting</em>, monitoring <em>at scale</em>, menyederhanakan visibilitas <em>metric</em>, membangun <em>dashboard</em> monitoring yang fleksibel, hingga memberikan <em>alert</em> dengan respon cepat. Sysdig membagi produknya menjadi beberapa jenis, yaitu <strong>Sysdig Monitor</strong>, <strong>Sysdig Secure</strong>, dan gabungan dari keduanya yang disebut dengan <strong>Sysdig Platform</strong> atau <strong>Sysdig Secure DevOps Platform</strong>. Semua produk tersebut sebenarnya adalah komersil, namun kita dapat mencobanya dengan <em>free-trial</em> selama satu bulan. Pada artikel ini saya hanya akan mencoba mengintegrasikan Sysdig Monitor saja.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/sysdig.png title=Sysdig data-thumbnail=/integrasi-sysdig-monitor-di-openshift/sysdig.png data-sub-html="<h2>Sysdig</h2><p>Sysdig</p>"><img class=lazyload src=/svg/loading.min.svg data-src=sysdig.png data-srcset="/integrasi-sysdig-monitor-di-openshift/sysdig.png, sysdig.png 1.5x, /integrasi-sysdig-monitor-di-openshift/sysdig.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/sysdig.png></a><figcaption class=image-caption>Sysdig</figcaption></figure></p><h3 id=metrics>Metrics</h3><p><strong>Metric</strong> adalah nilai kuantitatif atau ukuran yang dapat dikelompokkan atau dibagi dengan label. <em>Metric</em> dari Sysdig Monitor dibagi menjadi dua jenis seperti berikut.</p><ol><li><strong>Default metrics</strong>, yaitu <em>metric</em> yang berhubungan dengan sistem atau <em>host</em>, <em>container</em>, <em>orchestrator</em>, <em>HTTP</em>, dan infrastruktur jaringan.</li><li><strong>Custom metrics</strong>, berhubungan dengan <em>metric</em> yang didapat dari aplikasi pihak ketiga seperti <em>JMX</em>, <em>StatsD</em>, <em>Prometheus</em> dan beberapa <em>metric</em> dari aplikasi lain yang terintegrasi.</li></ol><p>Sysdig secara otomatis mengambil <em>metric</em> dari berbagai tipe, dan melabelinya secara otomatis. <em>Custom Metric</em> juga dapat dilabeli sesuai kebutuhan pengguna. Biasanya <em>metric</em> akan berguna untuk membuat Dashboard hingga Alerts.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/metric.png title=Metric data-thumbnail=/integrasi-sysdig-monitor-di-openshift/metric.png data-sub-html="<h2>Metric</h2><p>Metric</p>"><img class=lazyload src=/svg/loading.min.svg data-src=metric.png data-srcset="/integrasi-sysdig-monitor-di-openshift/metric.png, metric.png 1.5x, /integrasi-sysdig-monitor-di-openshift/metric.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/metric.png></a><figcaption class=image-caption>Metric</figcaption></figure></p><h3 id=sysdig-agent>Sysdig Agent</h3><p>Untuk dapat berjalan pada lingkungan <em>cloud native</em> yang kita miliki, Sysdig menggunakan <em>agent</em> yang disebut dengan <strong>Sysdig Agent</strong>, di mana <em>agent</em> tersebut diwujudkan sebagai sebuah <em>container</em> atau sebuah <em>service</em> yang dapat di-<em>deploy</em> dengan atau tanpa <em>container orchestrator</em> seperti <strong>Kubernetes</strong> atau <strong>Mesos</strong>.</p><hr><h2 id=prerequisites>Prerequisites</h2><p>Pastikan beberapa syarat ini terpenuhi sebelum melakukan tahap lebih lanjut.</p><h3 id=membuat-akun>Membuat Akun</h3><p>Kita memerlukan sebuah akun <em>free-trial</em> untuk mencoba Sysdig. Akun ini kita perlukan agar dapat mengoperasikan dashboard <em>front end</em> Sysdig Monitor dari klaster OpenShift kita. Silahkan membuat akun Sysdig dengan <a href=https://sysdig.com/company/free-trial/ target=_blank rel="noopener noreffer">alamat berikut</a>.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/membuat-akun-sysdig.png title="Membuat Akun Sysdig" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/membuat-akun-sysdig.png data-sub-html="<h2>Membuat Akun Sysdig</h2><p>Membuat Akun Sysdig</p>"><img class=lazyload src=/svg/loading.min.svg data-src=membuat-akun-sysdig.png data-srcset="/integrasi-sysdig-monitor-di-openshift/membuat-akun-sysdig.png, membuat-akun-sysdig.png 1.5x, /integrasi-sysdig-monitor-di-openshift/membuat-akun-sysdig.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/membuat-akun-sysdig.png></a><figcaption class=image-caption>Membuat Akun Sysdig</figcaption></figure></p><p>Isi beberapa data yang dibutuhkan seperti nama, jabatan pekerjaan, alamat email, nama perusahaan, dan negara. Kemudian pilih <strong>Trial Offer</strong> yang dibutuhkan, misalnya <strong>Sysdig Monitor</strong>. Untuk <strong>SaaS Region</strong> dapat dipilih berdasarkan di mana letak infrastruktur kita berada. Karena saya menggunakan layanan AWS di Amerika Serikat untuk menjalankan klaster OpenShift, maka saya memilih Region <strong>us-west</strong>. Kemudian untuk <strong>Primay Use Cases</strong> dapat di pilih apapun, misalnya <strong>Kubernetes Monitoring</strong>.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/konfirmasi-email.png title="Konfirmasi Email" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/konfirmasi-email.png data-sub-html="<h2>Konfirmasi Email</h2><p>Konfirmasi Email</p>"><img class=lazyload src=/svg/loading.min.svg data-src=konfirmasi-email.png data-srcset="/integrasi-sysdig-monitor-di-openshift/konfirmasi-email.png, konfirmasi-email.png 1.5x, /integrasi-sysdig-monitor-di-openshift/konfirmasi-email.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/konfirmasi-email.png></a><figcaption class=image-caption>Konfirmasi Email</figcaption></figure></p><p>Jika kata sandi sudah dibuat, biasanya kita perlu menunggu sekitar 15 menit untuk dapat masuk ke <em>front-end</em> dari Setelah membuat akun, tunggu beberapa saat dan kita akan mendapatkan sebuah email untuk membuat kata sandi baru.</p><h3 id=mendapatkan-access-key>Mendapatkan Access Key</h3><p>Untuk mendapatkan <em>access key</em> kita perlu masuk ke situs <em>front end</em> Sysdig. Kita dapat mengaksesnya dengan URL sesuai dengan Region yang kita gunakan.</p><table><thead><tr><th style=text-align:center>Region</th><th style=text-align:center>URL</th></tr></thead><tbody><tr><td style=text-align:center>US East (North Virginia)</td><td style=text-align:center><a href=https://app.sysdigcloud.com/#/login target=_blank rel="noopener noreffer">app.sysdigcloud.com/#/login</a></td></tr><tr><td style=text-align:center>US West (Oregon)</td><td style=text-align:center><a href=https://us2.app.sysdig.com/#/login target=_blank rel="noopener noreffer">us2.app.sysdig.com/#/login</a></td></tr><tr><td style=text-align:center>European Union</td><td style=text-align:center><a href=https://eu1.app.sysdig.com/#/login target=_blank rel="noopener noreffer">eu1.app.sysdig.com/#/login</a></td></tr></tbody></table><p>Setelah login, lalu masuk ke halaman <strong>Settings</strong> seperti berikut ini.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/settings.png title=Settings data-thumbnail=/integrasi-sysdig-monitor-di-openshift/settings.png data-sub-html="<h2>Settings</h2><p>Settings</p>"><img class=lazyload src=/svg/loading.min.svg data-src=settings.png data-srcset="/integrasi-sysdig-monitor-di-openshift/settings.png, settings.png 1.5x, /integrasi-sysdig-monitor-di-openshift/settings.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/settings.png></a><figcaption class=image-caption>Settings</figcaption></figure></p><p>Kemudian, pilih <strong>Agent Installation</strong> maka akan terdapat <em>Access Key</em> yang nanti akan kita gunakan.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/settings-agent-installation.png title="Settings - Agent Installation" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/settings-agent-installation.png data-sub-html="<h2>Settings - Agent Installation</h2><p>Settings - Agent Installation</p>"><img class=lazyload src=/svg/loading.min.svg data-src=settings-agent-installation.png data-srcset="/integrasi-sysdig-monitor-di-openshift/settings-agent-installation.png, settings-agent-installation.png 1.5x, /integrasi-sysdig-monitor-di-openshift/settings-agent-installation.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/settings-agent-installation.png></a><figcaption class=image-caption>Settings - Agent Installation</figcaption></figure></p><h3 id=klaster-openshift>Klaster OpenShift</h3><p>Di sini saya telah memiliki klaster OpenShift 4 dari hasil instalasi dengan metode IPI seperti yang telah saya tulis pada artikel sebelumnya (<a href=../quick-install-okd-4-di-aws rel><strong>Quick Install OKD 4 di AWS</strong></a>). Dan pastikan bahwa OpenShift dapat dikelola dari komputer lokal kita menggunakan perintah <code>oc</code> atau <code>origin-client</code>.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/klaster-openshift.png title="Klaster OpenShift" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/klaster-openshift.png data-sub-html="<h2>Klaster Openshift</h2><p>Klaster OpenShift</p>"><img class=lazyload src=/svg/loading.min.svg data-src=klaster-openshift.png data-srcset="/integrasi-sysdig-monitor-di-openshift/klaster-openshift.png, klaster-openshift.png 1.5x, /integrasi-sysdig-monitor-di-openshift/klaster-openshift.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/klaster-openshift.png></a><figcaption class=image-caption>Klaster Openshift</figcaption></figure></p><hr><h2 id=konfigurasi-openshift>Konfigurasi OpenShift</h2><p>Jika prasyarat sebelumnya telah terpenuhi, maka kita dapat melanjutkan beberapa tahap berikut.</p><h3 id=membuat-project-baru>Membuat Project Baru</h3><p>Buat sebuah project baru untuk <em>deployment</em> Sysdig Agent seperti berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc adm new-project sysdig-agent --node-selector<span class=o>=</span><span class=s1>&#39;app=sysdig-agent&#39;</span>
</code></pre></td></tr></table></div></div><h3 id=melabeli-node>Melabeli Node</h3><p>Labeli semua node dengan <em>node selector</em> seperti berikut ini.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc label node --all <span class=s2>&#34;app=sysdig-agent&#34;</span>
</code></pre></td></tr></table></div></div><h3 id=pindah-project>Pindah Project</h3><p>Sekarang kita akan berpindah menuju project yang baru saja dibuat, jalankan perintah berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc project sysdig-agent
</code></pre></td></tr></table></div></div><h3 id=membuat-service-account>Membuat Service Account</h3><p>Kita perlu membuat <em>service account</em> baru untuk project <strong>sysdig-agent</strong>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc create serviceaccount sysdig-agent
</code></pre></td></tr></table></div></div><h3 id=previlege-security-context-constraints>Previlege Security Context Constraints</h3><p>Tambahkan <em>service account</em> sebelumnya ke <strong>previleged</strong> Security Context Constraint dengan perintah berikut ini.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc adm policy add-scc-to-user privileged -n sysdig-agent -z sysdig-agent
</code></pre></td></tr></table></div></div><h3 id=cluster-role>Cluster Role</h3><p>Tambahkan <em>service account</em> sebelumnya ke Cluster Role <code>cluster-reader</code> seperti berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc adm policy add-cluster-role-to-user cluster-reader -n sysdig-agent -z sysdig-agent
</code></pre></td></tr></table></div></div><hr><h2 id=memasang-sysdig-agent>Memasang Sysdig Agent</h2><p>Pada tahap ini saya akan menggunakan <strong>Helm</strong> untuk mempermudah dan mempercepat pemasangan Sysdig Agent pada klaster.</p><h3 id=pasang-paket-helm>Pasang Paket Helm</h3><p>Sebelumnya pasang terlebih dahulu paket <code>helm</code> di komputer lokal kita dengan perintah seperti berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo pacman -Sy helm
</code></pre></td></tr></table></div></div><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fas fa-exclamation-triangle fa-fw"></i>Perhatian<i class="details-icon fas fa-angle-right fa-fw"></i></div><div class=details-content><div class=admonition-content>Saya menggunakan sistem GNU/Linux dengan distro Arch-based, maka di sini saya memakai <em>package manager</em> <code>pacman</code>. Silahkan sesuaikan dengan distro yang kalian gunakan.</div></div></div><h3 id=menambah-repositori>Menambah Repositori</h3><p>Tambahkan repositori Helm dari Sysdig ke komputer lokal.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ helm repo add sysdig https://charts.sysdig.com
$ helm repo update
</code></pre></td></tr></table></div></div><h3 id=pasang-sysdig-agent-dengan-helm>Pasang Sysdig Agent dengan Helm</h3><p>Jalankan perintah berikut ini untuk memasang Sysdig Agent melalui Helm.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ helm install sysdig-agent <span class=se>\
</span><span class=se></span>    --set sysdig.accessKey<span class=o>=</span>&lt;access key&gt; <span class=se>\
</span><span class=se></span>    --set sysdig.settings.collector<span class=o>=</span>ingest-us2.app.sysdig.com <span class=se>\
</span><span class=se></span>    --set sysdig.settings.collector_port<span class=o>=</span><span class=m>6443</span> <span class=se>\
</span><span class=se></span>    --set sysdig.settings.k8s_cluster_name<span class=o>=</span>&lt;nama klaster&gt; <span class=se>\
</span><span class=se></span>    --set sysdig.settings.ssl<span class=o>=</span><span class=nb>true</span> <span class=se>\
</span><span class=se></span>    --set sysdig.settings.ssl_verify_certificate<span class=o>=</span><span class=nb>false</span> <span class=se>\
</span><span class=se></span>    sysdig/sysdig
</code></pre></td></tr></table></div></div><p>Sesuaikan <strong>accessKey</strong> dengan yang kita dapat dari <em>front-end</em> Sysdig di tahap <a href=#mendapatkan-access-key rel>sebelumnya</a>. Sesuaikan juga <strong>k8s_cluster_name</strong> dengan nama klaster OpenShift kita. Sedangkan untuk <strong>collector</strong> dan <strong>collector_port</strong> disesuaikan dengan region dari akun Sysdig yang kita gunakan, di sini saya memakai <code>ingest-us2.app.sysdig.com:6443</code> karena saya menggunakan akun Sysdig dengan region <strong>us-west</strong>. Untuk informasi selengkapnya dari masing-masing region, silahkan melihat <a href=https://docs.sysdig.com/en/saas-regions-and-ip-ranges.html target=_blank rel="noopener noreffer">alamat kolektor dari Sysdig</a>.</p><hr><h2 id=pengujian>Pengujian</h2><p>Jika tahap-tahap sebelumnya telah dilakukan, sekarang kita akan menguji apakah Sysdig Agent berhasil terpasang pada klaster.</p><h3 id=pods>Pods</h3><p>Coba periksa <em>pods</em> milik Sysdig Agents dengan perintah berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ oc get pods
</code></pre></td></tr></table></div></div><p>Jika berhasil, maka kurang lebih akan muncul tampilan seperti berikut.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-cfg data-lang=cfg><span class=na>NAME                                READY   STATUS    RESTARTS   AGE</span>
<span class=na>sysdig-agent-2wcsj                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-45hgx                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-559z9                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-89wqp                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-b5vbn                  1/1     Pending   0          32m</span>
<span class=na>sysdig-agent-b9rlt                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-2rjht   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-5vmp2   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-m6xkb   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-mhgb7   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-n8xm2   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-pgr9p   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-pn8kv   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-q4mvv   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-image-analyzer-rstz5   1/1     Running   0          32m</span>
<span class=na>sysdig-agent-n4wqv                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-pd745                  1/1     Running   0          32m</span>
<span class=na>sysdig-agent-vsr4b                  1/1     Running   0          32m</span>
</code></pre></td></tr></table></div></div><h3 id=front-end>Front End</h3><p>Buka kembali dashboard <em>front-end</em> Sysdig, apabila Sysdig Agent berhasil terpasang maka seharusnya pada halaman <strong>Get Started</strong> akan muncul tampilan seperti berikut.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/front-end-sysdig.png title="Front End Sysdig" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/front-end-sysdig.png data-sub-html="<h2>Front End Sysdig</h2><p>Front End Sysdig</p>"><img class=lazyload src=/svg/loading.min.svg data-src=front-end-sysdig.png data-srcset="/integrasi-sysdig-monitor-di-openshift/front-end-sysdig.png, front-end-sysdig.png 1.5x, /integrasi-sysdig-monitor-di-openshift/front-end-sysdig.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/front-end-sysdig.png></a><figcaption class=image-caption>Front End Sysdig</figcaption></figure></p><p>Selanjutnya coba buka <strong>Dashboard</strong> kemudian misalnya pilih saja <strong>Host Resource Usage</strong>, seharusnya akan tampil informasi penggunaan <em>resource</em> dari klaster seperti berikut ini.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/host-resource-usage.png title="Host Resource Usage" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/host-resource-usage.png data-sub-html="<h2>Host Resource Usage</h2><p>Host Resource Usage</p>"><img class=lazyload src=/svg/loading.min.svg data-src=host-resource-usage.png data-srcset="/integrasi-sysdig-monitor-di-openshift/host-resource-usage.png, host-resource-usage.png 1.5x, /integrasi-sysdig-monitor-di-openshift/host-resource-usage.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/host-resource-usage.png></a><figcaption class=image-caption>Host Resource Usage</figcaption></figure></p><p>Sedangkan untuk menampilkan <strong>Overview</strong> kita perlu menunggu beberapa saat karena Sysdig membutuhkan waktu yang cukup lama untuk mengolah <em>metric</em> dari klaster. Jika sudah bisa ditampilkan, maka kurang lebih akan seperti berikut.</p><p><figure><a class=lightgallery href=/integrasi-sysdig-monitor-di-openshift/sysdig-monitor-overview.png title="Sysdig Monitor Overview" data-thumbnail=/integrasi-sysdig-monitor-di-openshift/sysdig-monitor-overview.png data-sub-html="<h2>Sysdig Monitor Overview</h2><p>Sysdig Monitor Overview</p>"><img class=lazyload src=/svg/loading.min.svg data-src=sysdig-monitor-overview.png data-srcset="/integrasi-sysdig-monitor-di-openshift/sysdig-monitor-overview.png, sysdig-monitor-overview.png 1.5x, /integrasi-sysdig-monitor-di-openshift/sysdig-monitor-overview.png 2x" data-sizes=auto alt=/integrasi-sysdig-monitor-di-openshift/sysdig-monitor-overview.png></a><figcaption class=image-caption>Sysdig Monitor Overview</figcaption></figure></p><hr><h2 id=kesimpulan>Kesimpulan</h2><p>Jika kita ingin melakukan inspeksi lebih lanjut terhadap container yang ada pada klaster, sebenarnya kita dapat memilih menggunakan <strong>Sysdig Platform</strong> di mana kita juga akan mendapatkan <strong>Sysdig Secure</strong> untuk keperluan forensik atau kebutuhan lain terkait keamanan pada klaster. Pada bagian Settings di Sysdig Monitor kita akan mendapati beberapa fitur <em>Notification Channels</em> yang lumayan berguna. Fitur tersebut dapat kita kombinasikan dengan menu <em>Alerts</em> untuk mengirimkan pemberitahuan langsung melalui beberapa macam layanan seperti Email, Slack, hingga WebHook. Sebagai alternatif lain dari Sysdig kita dapat menggunakan tools seperti <strong>GAP Stack</strong> (<strong>Grafana</strong>, <strong>Alertmanager</strong>, <strong>Prometheus</strong>) atau <strong>DataDog</strong>. Sebelumnya saya mencoba untuk mengintegrasikan Sysdig pada OKD namun menemui <a href=https://github.com/draios/sysdig/issues/1728 target=_blank rel="noopener noreffer">issue pada pod Sysdig Agent</a>, selanjutnya saya putuskan untuk mencobanya di klaster OpenShift dan Sysdig Monitor dapat berjalan tanpa kendala.</p><hr><h2 id=referensi>Referensi</h2><ul><li><a href=https://docs.sysdig.com/en/getting-started-with-sysdig-monitor.html target=_blank rel="noopener noreffer">docs.sysdig.com/en/getting-started-with-sysdig-monitor.html</a></li><li><a href=https://docs.sysdig.com/en/host-requirements-for-agent-installation.html target=_blank rel="noopener noreffer">docs.sysdig.com/en/host-requirements-for-agent-installation.html</a></li><li><a href=https://docs.sysdig.com/en/steps-for-openshift.html target=_blank rel="noopener noreffer">docs.sysdig.com/en/steps-for-openshift.html</a></li><li><a href=https://charts.sysdig.com/ target=_blank rel="noopener noreffer">charts.sysdig.com/</a></li><li><a href=https://docs.sysdig.com/en/saas-regions-and-ip-ranges.html target=_blank rel="noopener noreffer">docs.sysdig.com/en/saas-regions-and-ip-ranges.html</a></li><li><a href=https://docs.openshift.com/container-platform/4.6/cli_reference/helm_cli/getting-started-with-helm-on-openshift-container-platform.html target=_blank rel="noopener noreffer">docs.openshift.com/container-platform/4.6/cli_reference/helm_cli/getting-started-with-helm-on-openshift-container-platform.html</a></li><li><a href=https://www.openshift.com/blog/monitoring-openshift-three-tools target=_blank rel="noopener noreffer">www.openshift.com/blog/monitoring-openshift-three-tools</a></li><li><a href=https://kubernetes.io/docs/concepts/cluster-administration/system-metrics/ target=_blank rel="noopener noreffer">kubernetes.io/docs/concepts/cluster-administration/system-metrics/</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-01-13</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/sysdig/>Sysdig</a>,&nbsp;<a href=/tags/openshift/>OpenShift</a>,&nbsp;<a href=/tags/monitoring/>Monitoring</a>,&nbsp;<a href=/tags/saas/>SaaS</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/quick-install-okd-4-di-aws/ class=prev rel=prev title="Quick Install OKD 4 di AWS"><i class="fas fa-angle-left fa-fw"></i>Quick Install OKD 4 di AWS</a>
<a href=/kubernetes-cluster-provisioning-dengan-terraform-dan-ansible-di-aws/ class=next rel=next title="Kubernetes Cluster Provisioning dengan Terraform dan Ansible">Kubernetes Cluster Provisioning dengan Terraform dan Ansible<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=http://github.com/anwareset target=_blank>anwareset</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=https://anwars-blog.disqus.com/embed.js defer></script><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"data":{"id-1":"init\u0026nbsp","id-2":"init\u0026nbsp"},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"lunr"},"typeit":{"cursorChar":"\u0026nbsp _","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":75}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>